{"version":3,"sources":["example.cljs"],"mappings":";AAMA,gBAAA,wBAAAA,xCAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;gBAAAA,ZAAyCM;cAAzC,AAAAJ,4CAAAF,eAAA,rEAAqBI;aAArB,AAAAF,4CAAAF,eAAA,pEAA6BK;AAA7B,AACE,oBAAMC;AAAN,AAAA,0FAAA,mDAAA,2CAAA,oEAAA,QAAA,uDAAA,2CAAA,8DAAA,QAAA,oDAAA,OAAA,uDAAA,KAAA,mEAAA,KAAA,gEAAA,MAAA,iEAAA,MAAA,gEAAA,yDAAA,8EAAA,2CAAA,uDAAA,2CAAA,+DAAA,mCAAA,kFAAA,2CAAA,uDAAA,2CAAA,0DAAA,IAAA,+DAAA,2CAAA,mFAAA,mDAAA,mFAAA,yDAAA,2CAAA,gDAAA,2CAAA,8EAAA,iBAAA,mFAAA,3HAiB0BD,8KAEhBD;;AAnBV;;;AAqBF,eAAA,fAAMG,sCAAMC;AAAZ,AACE,WAAA,AAAAC,PAAMC,uBAAMF;AAAZ,AAAA,0FAAA,6JAAA,mFAAA,wDAAA,mFAAA,yDAAA,2CAAA,gDAAA,2CAAA,uDAAA,mFAAA,mFAAA,uEAAA,mFAAA,+DAAA,aAAA,mFAAA,uEAAA,mFAAA,+DAAA,2CAAA,yDAAA,SAAA,yDAAA,mFAAA,mFAAA,uEAAA,mFAAA,+DAAA,6DAAA,mBAAA,mFAAA,8CAAA,iBAAA,mFAAA,hlEAEG,AAACL,cAAM,AAAA,qFAAQO,giEAOT,4CAAKA;;AAEhB,AAAKC,gBAAM,6CAAA,7CAACC;AAEZ,iBAAA,jBAAMC;AAAN,AACE,OAACC,qBAAS,wBAAA,xBAACC,+BACD,AAACR,aAAKI;;AAElB,AAACK,+CAA4B,WAAKR;AAAL,AAAA,OAAAC,gBAAaD;;AAE1C,AAACS,wEAA0BC;AAE3B,2BAAA,2CAAA,kDAAA,6EAAA,rMAAKC,yQAGF,WAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAApB,4BAAAoB;UAAAA,NAAgCG;aAAhC,AAAAtB,4CAAAmB,eAAA,pEAAaC;aAAb,AAAApB,4CAAAmB,eAAA,pEAAoBE;AAApB,AACE,GAAM,AAACE,cAAIF;AAAX,AACE,yGAAA,2JAAA,pQAACG,+IAAoC,AAACC,wGAAOL;;AAC7C,AAACM,iDAAcL;;AAFjB;;AAGAC;;AAEL,AAACP,wEAA0BE;AAE3B,qCAAA,rCAACU,4GAAqC,WAAKC,EAAEtB,MAAMuB,KAAKC;AAAlB,AAAuB,OAACC,mDAAMzB,MAAM0B,mBAASH,KAAKC;;AAExF,qBAAA,rBAAMG,kDAAO3B;AAAb,AACE,iCAAA,WAAA4B,iBAAAC,7DAACC;AAAD,AAAkB,qCAAAF,iBAAAC,/CAACE,wBAAa/B;;;AAChC,0BAAA,0DAAA,pFAACgC,oBAAUhC;AAAX,AAA0B,OAACK;;;AAC3B,OAACA;;AAEH,AAACsB,mBAAMxB","names":["p__28824","map__28825","cljs.core/--destructure-map","cljs.core.get","example/alert","content","remove","alert","example/page","store","cljs.core/deref","data","example/store","cljs.core.atom","example/render","replicant.dom/render","js/document.getElementById","nexus.registry/register-system->state!","nexus.registry.register_interceptor_BANG_","nexus.strategies/fail-fast","example/exception-logger","p__28826","map__28827","effect","errors","ctx","cljs.core/seq","cljs.core.println","cljs.core.pr_str","cljs.pprint.pprint","nexus.registry/register-effect!","_","path","val","cljs.core.swap_BANG_","cljs.core/assoc-in","example/init!","p1__28828#","p2__28829#","replicant.dom/set-dispatch!","nexus.registry/dispatch","cljs.core/add-watch"],"sourcesContent":["(ns example\n  (:require [clojure.pprint :as pprint]\n            [nexus.registry :as nxr]\n            [nexus.strategies :as strategies]\n            [replicant.dom :as r]))\n\n(defn alert [{:keys [content remove] :as alert}]\n  (when alert\n    [:div\n     {:replicant/key \"alert\"\n      :style {:position    \"fixed\"\n              :top         \"5rem\"\n              :right       \"5%\"\n              :margin-left \"5%\"\n              :max-width   \"45%\"\n              :max-height  \"45%\"\n              :transition  \"opacity 0.5s ease-out, transform 0.3s ease-out\"}\n\n      :replicant/mounting\n      {:style {:transform \"translateX(100%)\"}}\n      :replicant/unmounting\n      {:style {:opacity   0\n               :transform \"translateX(100%)\"}}}\n     [:div\n      [:button {:on {:click remove}}\n       \"Remove\"]\n      [:div content]]]))\n\n(defn page [store]\n  (let [data @store]\n    [:div\n     (alert (:alert data))\n     [:br]\n     [:button {:on {:click [[:state/assoc-in [:alert] nil]\n                            [:state/assoc-in [:alert] {:content \"Alert!\"\n                                                       :remove  [[:state/assoc-in [:alert] nil]]}]]}}\n      \"Click me\"]\n     [:p \"State:\"]\n     [:pre (str data)]]))\n\n(def store (atom {}))\n\n(defn render []\n  (r/render (js/document.getElementById \"app\")\n            (page store)))\n\n(nxr/register-system->state! (fn [store] @store))\n\n(nxr/register-interceptor! strategies/fail-fast)\n\n(def exception-logger\n  {:id :exception-logger\n   :after-effect\n   (fn [{:keys [effect errors] :as ctx}]\n     (when (seq errors)\n       (println \"\u26a0\ufe0f  Errors while handling\" (pr-str effect) \":\")\n       (pprint/pprint errors))\n     ctx)})\n\n(nxr/register-interceptor! exception-logger)\n\n(nxr/register-effect! :state/assoc-in (fn [_ store path val] (swap! store assoc-in path val)))\n\n(defn init! [store]\n  (r/set-dispatch! #(nxr/dispatch store %1 %2))\n  (add-watch store :render #(render))\n  (render))\n\n(init! store)\n\n\n"]}